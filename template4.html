<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contract Management Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }

        body {
            background-color: #F5F5F5;
            color: #333;
        }

        .sidebar {
            background-color: #2D2D2D;
            color: #FFFFFF;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 20px;
            cursor: pointer;
            transition: all .2s;
            color: #B0B0B0;
            font-size: 14px;
        }

        .sidebar-item:hover {
            background-color: #3D3D3D;
            color: #FFFFFF;
        }

        .sidebar-item.active {
            background-color: #0052CC;
            color: #FFFFFF;
            border-left: 4px solid #0052CC;
        }

        .sidebar-icon {
            width: 24px;
            height: 24px;
        }

        .header-section {
            background-color: #FFFFFF;
            padding: 20px;
            border-bottom: 1px solid #E0E0E0;
        }

        .header-title {
            font-size: 24px;
            font-weight: 700;
            color: #1A1A1A;
        }

        .section-header {
            background: linear-gradient(90deg, #0052FF 0%, #0067FF 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 4px 4px 0 0;
            font-weight: 600;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .section-content {
            background-color: #FFFFFF;
            padding: 20px;
            border: 1px solid #E0E0E0;
            border-top: none;
        }

        .stat-card {
            background: #FFFFFF;
            border: 1px solid #E0E0E0;
            border-radius: 4px;
            padding: 20px;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: #0052FF;
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: .5px;
        }

        .button-primary {
            background: #22C55E;
            color: white;
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            font-weight: 600;
            font-size: 12px;
            cursor: pointer;
            transition: background-color .2s;
        }

        .button-primary:hover {
            background: #16A34A;
        }

        .button-secondary {
            background: #EF4444;
            color: white;
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            font-weight: 600;
            font-size: 12px;
            cursor: pointer;
            transition: background-color .2s;
        }

        .button-secondary:hover {
            background: #DC2626;
        }

        .workflow-item {
            background: #FFFFFF;
            border: 1px solid #E0E0E0;
            border-radius: 4px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .workflow-info {
            flex: 1;
        }

        .workflow-title {
            font-weight: 600;
            color: #1A1A1A;
            margin-bottom: 4px;
        }

        .workflow-subtitle {
            font-size: 12px;
            color: #666;
        }

        .form-section {
            background: #FFFFFF;
            border: 1px solid #E0E0E0;
            border-radius: 4px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            font-size: 12px;
            color: #1A1A1A;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: .3px;
        }

        .form-input,
        .form-select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #E0E0E0;
            border-radius: 4px;
            font-size: 13px;
            background: #FFFFFF;
        }

        .form-input:focus,
        .form-select:focus {
            outline: none;
            border-color: #0052FF;
            box-shadow: 0 0 0 3px rgba(0, 82, 255, .1);
        }

        .view {
            display: none;
        }

        .view.active {
            display: block;
        }

        .sidebar {
            background-color: #1F2125;
            color: #FFFFFF;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 12px 20px;
            cursor: pointer;
            transition: all .2s;
            color: #9CA3AF;
            font-size: 15px;
            font-weight: 500;
        }

        .sidebar-item:hover {
            background-color: #2D2F31;
            color: #FFFFFF;
        }

        .sidebar-item.active {
            background-color: #2D2F31;
            color: #FFFFFF;
        }

        .sidebar-icon-wrapper {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .header-section {
            background-color: #FFFFFF;
            padding: 20px;
            border-bottom: 1px solid #E0E0E0;
        }

        .header-title {
            font-size: 24px;
            font-weight: 700;
            color: #1A1A1A;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            margin: 8px 0;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 2px;
        }

        #chartLegend {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            padding-left: 16px;
        }

        .chart-legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 6px 0;
            justify-content: space-between;
        }

        .chart-legend-color {
            width: 14px;
            height: 14px;
            border-radius: 3px;
            flex-shrink: 0;
        }

        .chart-legend-label {
            margin-left: 8px;
            color: #111827;
            font-size: 13px;
            flex: 1;
        }

        .chart-legend-value {
            margin-left: 12px;
            color: #374151;
            font-size: 13px;
            font-weight: 600;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendar-month {
            font-size: 18px;
            font-weight: 700;
            color: #0052FF;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 20px;
            grid-auto-rows: 44px;
            max-height: 360px;
            overflow: auto;
        }

        .calendar-weekday {
            text-align: center;
            font-weight: 600;
            color: #0052FF;
            font-size: 11px;
            text-transform: uppercase;
            padding: 8px 0;
        }

        .calendar-day {
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #E0E0E0;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            background-color: #FFFFFF;
            transition: all .2s;
            position: relative;
        }

        .calendar-day:hover {
            background-color: #F5F5F5;
        }

        .calendar-day.today {
            background-color: #0052FF;
            color: white;
            font-weight: 700;
        }

        .calendar-day.other-month {
            color: #CCC;
        }

        .calendar-day.selected-day {
            outline: 2px solid #0052FF;
            box-shadow: 0 0 0 4px rgba(0, 82, 255, 0.06);
            background-color: #E9F5FF;
        }

        .event-item {
            padding: 12px;
            border-left: 3px solid #0052FF;
            background-color: #F8F8F8;
            border-radius: 2px;
            margin-bottom: 12px;
        }

        .event-date {
            font-size: 12px;
            color: #0052FF;
            font-weight: 700;
        }

        .event-title {
            font-size: 13px;
            color: #1A1A1A;
            margin-top: 4px;
        }

        .expiry-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 12px;
            margin-top: 20px;
        }

        .expiry-box {
            border: 2px solid #E0E0E0;
            border-radius: 4px;
            padding: 16px;
            text-align: center;
        }

        .expiry-number {
            font-size: 28px;
            font-weight: 700;
            color: #0052FF;
        }

        .expiry-label {
            font-size: 11px;
            color: #666;
            margin-top: 8px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        /* Accordion for workflow sections */
        .accordion-header {
            background: #FFFFFF;
            padding: 12px 14px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            box-shadow: 0 1px 0 rgba(0, 0, 0, 0.04);
            cursor: pointer;
        }

        .accordion-title {
            font-weight: 600;
            color: #111827;
        }

        .accordion-toggle {
            background: transparent;
            border: none;
            font-size: 18px;
            transform: rotate(0deg);
            transition: transform .18s;
        }

        .accordion-row.open .accordion-toggle {
            transform: rotate(180deg);
        }

        .accordion-content {
            display: none;
            padding: 12px;
            margin-bottom: 12px;
            border-radius: 6px;
            background: #F8F8F8;
        }

        .accordion-row.open .accordion-content {
            display: block;
        }
    </style>
</head>

<body class="bg-gray-100">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div class="sidebar w-56 flex flex-col">
            <div class="p-6 border-b border-gray-600">
                <div class="flex items-center gap-2 text-white font-bold text-lg">
                    <div class="bg-blue-500 rounded px-2 py-1">CM</div>
                    Contract Manager
                </div>
            </div>
            <nav class="flex-1 overflow-y-auto">
                <!-- Dashboards -->
                <div class="sidebar-item active" onclick="switchView('dashboards')">
                    <svg class="sidebar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"></rect>
                        <rect x="14" y="3" width="7" height="7"></rect>
                        <rect x="14" y="14" width="7" height="7"></rect>
                        <rect x="3" y="14" width="7" height="7"></rect>
                    </svg>
                    Dashboards
                </div>
                <!-- Workflow -->
                <div class="sidebar-item" onclick="switchView('workflow')">
                    <svg class="sidebar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="5" r="2"></circle>
                        <line x1="12" y1="7" x2="12" y2="15"></line>
                        <circle cx="8" cy="18" r="2"></circle>
                        <circle cx="16" cy="18" r="2"></circle>
                        <line x1="10" y1="16" x2="8" y2="16"></line>
                        <line x1="14" y1="16" x2="16" y2="16"></line>
                    </svg>
                    Workflow
                </div>
                <!-- Contracts -->
                <div class="sidebar-item" onclick="switchView('contracts')">
                    <svg class="sidebar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="12" y1="13" x2="16" y2="13"></line>
                        <line x1="12" y1="17" x2="16" y2="17"></line>
                        <polyline points="9 13 8 12 7 13"></polyline>
                        <polyline points="9 17 8 16 7 17"></polyline>
                    </svg>
                    Contracts
                </div>
                <!-- Events -->
                <div class="sidebar-item" onclick="switchView('events')">
                    <svg class="sidebar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    Events
            </nav>

            <!-- Logout -->
            <div class="p-4 border-t border-gray-700">
                <div class="sidebar-item text-red-400 hover:text-red-300 hover:bg-red-900/20"
                    onclick="window.location.href='index.html'">
                    <svg class="sidebar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                    Logout
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 overflow-auto flex flex-col">
            <div class="header-section flex items-center justify-between">
                <div class="header-title">Dashboard</div>
                <div class="text-gray-400 cursor-pointer hover:text-gray-600 transition-colors"
                    onclick="switchView('search')">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                </div>
            </div>

            <!-- Dashboards View -->
            <div id="dashboards-view" class="view active flex-1 overflow-auto">
                <div class="p-6">
                    <div class="mb-6">
                        <div
                            style="background:linear-gradient(90deg,#0052FF 0%,#0067FF 100%); color:#fff; padding:12px 16px; border-radius:8px 8px 0 0; font-weight:600; font-size:18px; display:flex; justify-content:space-between; align-items:center;">
                            <div>Contracts</div>
                            <div style="transform:rotate(0deg);">▲</div>
                        </div>
                        <div class="section-content" style="border-radius:0 0 8px 8px; padding:18px;">
                            <div class="grid grid-cols-2 gap-4">
                                <div class="stat-card" style="border-radius:8px; padding:24px;">
                                    <div class="stat-label">Total Number of Contracts</div>
                                    <div class="stat-value">5</div>
                                </div>
                                <div class="stat-card" style="border-radius:8px; padding:24px;">
                                    <div class="stat-label">Number of Active Contracts</div>
                                    <div class="stat-value">5</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="section-header">Events<span>▲</span></div>
                    <div class="section-content mb-6">
                        <div class="grid grid-cols-2 gap-4">
                            <div class="stat-card">
                                <div class="stat-label">Reminders The Next 12 Months</div>
                                <div class="stat-value">15</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Events The Next 12 Months</div>
                                <div class="stat-value">15</div>
                            </div>
                        </div>
                    </div>

                    <div class="section-header">Contracts per Category<span>▲</span></div>
                    <div class="section-content mb-6">
                        <div class="flex items-center gap-8">
                            <div
                                style="flex:1; min-width:320px; height:320px; display:flex; align-items:center; justify-content:center;">
                                <canvas id="categoryChart" style="width:100%; height:100%;"></canvas>
                            </div>
                            <div id="chartLegend" aria-hidden="true"></div>
                        </div>
                    </div>

                    <div class="section-header">Contract Expiry<span>▲</span></div>
                    <div class="section-content mb-6">
                        <div class="expiry-grid">
                            <div class="expiry-box">
                                <div class="expiry-number">5</div>
                                <div class="expiry-label">Expired</div>
                            </div>
                            <div class="expiry-box">
                                <div class="expiry-number">0</div>
                                <div class="expiry-label">Within 1 month</div>
                            </div>
                            <div class="expiry-box">
                                <div class="expiry-number">0</div>
                                <div class="expiry-label">Within 1 to 3 months</div>
                            </div>
                            <div class="expiry-box">
                                <div class="expiry-number">0</div>
                                <div class="expiry-label">Within 3 to 6 months</div>
                            </div>
                            <div class="expiry-box">
                                <div class="expiry-number">0</div>
                                <div class="expiry-label">Within 6 to 12 months</div>
                            </div>
                        </div>
                    </div>

                    <div class="section-header">Calendar<span>▲</span></div>
                    <div id="calendarSectionContent" class="section-content">
                        <div class="calendar-header">
                            <button class="text-gray-400" id="prevMonth">←</button>
                            <div>
                                <div class="calendar-month" id="calendarMonth">January</div>
                                <div style="text-align:center; color:#0052FF; font-weight:700;" id="calendarYear">2026
                                </div>
                            </div>
                            <button class="text-gray-400" id="nextMonth">→</button>
                        </div>

                        <div class="calendar-grid" id="calendarGrid">
                            <div class="calendar-weekday">SUN</div>
                            <div class="calendar-weekday">MON</div>
                            <div class="calendar-weekday">TUE</div>
                            <div class="calendar-weekday">WED</div>
                            <div class="calendar-weekday">THU</div>
                            <div class="calendar-weekday">FRI</div>
                            <div class="calendar-weekday">SAT</div>

                            <!-- Simple static grid for Jan 2026 matching screenshot -->
                            <div class="calendar-day other-month">28</div>
                            <div class="calendar-day other-month">29</div>
                            <div class="calendar-day other-month">30</div>
                            <div class="calendar-day other-month">31</div>
                            <div class="calendar-day" data-day="1">1</div>
                            <div class="calendar-day" data-day="2">2</div>
                            <div class="calendar-day" data-day="3">3</div>

                            <div class="calendar-day" data-day="4">4</div>
                            <div class="calendar-day" data-day="5">5</div>
                            <div class="calendar-day" data-day="6">6</div>
                            <div class="calendar-day" data-day="7">7</div>
                            <div class="calendar-day" data-day="8">8</div>
                            <div class="calendar-day" data-day="9">9</div>
                            <div class="calendar-day" data-day="10">10</div>

                            <div class="calendar-day" data-day="11">11</div>
                            <div class="calendar-day" data-day="12">12</div>
                            <div class="calendar-day" data-day="13">13</div>
                            <div class="calendar-day" data-day="14">14</div>
                            <div class="calendar-day" data-day="15">15</div>
                            <div class="calendar-day" data-day="16">16</div>
                            <div class="calendar-day" data-day="17">17</div>

                            <div class="calendar-day" data-day="18">18</div>
                            <div class="calendar-day" data-day="19">19</div>
                            <div class="calendar-day" data-day="20">20</div>
                            <div class="calendar-day" data-day="21">21</div>
                            <div class="calendar-day" data-day="22">22</div>
                            <div class="calendar-day" data-day="23">23</div>
                            <div class="calendar-day" data-day="24">24</div>

                            <div class="calendar-day" data-day="25">25</div>
                            <div class="calendar-day" data-day="26">26</div>
                            <div class="calendar-day" data-day="27">27</div>
                            <div class="calendar-day" data-day="28">28</div>
                            <div class="calendar-day" data-day="29">29</div>
                            <div class="calendar-day" data-day="30">30</div>
                            <div class="calendar-day" data-day="31">31</div>
                        </div>

                        <!-- Filtered events list will be rendered here by JS -->
                    </div>
                </div>
            </div>

            <!-- Contracts View -->
            <div id="contracts-view" class="view flex-1 overflow-auto">
                <div class="p-6">
                    <div class="mb-6">
                        <button class="button-primary" style="background:#10b981;padding:8px 14px;"
                            onclick="switchView('create-contract')">New
                            Contract</button>
                    </div>

                    <div class="contracts-accordion">
                        <div class="accordion-row">
                            <div class="accordion-header">
                                <div class="accordion-title">Suppliers</div>
                                <button class="accordion-toggle">▾</button>
                            </div>
                            <div class="accordion-content">
                                <!-- Individual supplier rows with richer placeholder data -->
                                <div class="accordion-row">
                                    <div class="accordion-header">
                                        <div class="accordion-title">Shattered Glass Group PTY (Ltd)</div>
                                        <button class="accordion-toggle">▾</button>
                                    </div>
                                    <div class="accordion-content">
                                        <div
                                            style="background:#fff;padding:12px;border-radius:4px;box-shadow:0 2px 4px rgba(0,0,0,0.06);display:flex;justify-content:space-between;align-items:flex-start;gap:16px;position:relative;">
                                            <div style="flex:1; min-width:260px;">
                                                <div style="font-size:14px;font-weight:700;color:#111827;">Master
                                                    Services Agreement (MSA)</div>
                                                <div style="font-size:13px;color:#374151;margin-top:6px;">Contract ID:
                                                    MSA-2025-001</div>
                                                <div style="font-size:12px;color:#6B7280;margin-top:8px;">Owner: Legal -
                                                    Sarah Patel</div>
                                            </div>
                                            <div
                                                style="min-width:260px; text-align:right; display:flex; flex-direction:column; justify-content:space-between; align-items:flex-end;">
                                                <div>
                                                    <div style="font-size:13px;color:#111827;"><strong>Status:</strong>
                                                        Active</div>
                                                    <div style="font-size:12px;color:#6B7280;margin-top:6px;">Business
                                                        Partner: Shattered Glass Group PTY (Ltd)</div>
                                                    <div style="font-size:12px;color:#6B7280;margin-top:6px;">Value: AUD
                                                        120,000</div>
                                                    <div style="font-size:12px;color:#6B7280;margin-top:6px;">Period:
                                                        01-Jan-2025 → 31-Dec-2025</div>
                                                </div>
                                                <div style="margin-top:8px;">
                                                    <button class="button-primary"
                                                        onclick="switchView('create-contract')">View</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Fun Time removed as requested -->

                                <div class="accordion-row">
                                    <div class="accordion-header">
                                        <div class="accordion-title">2025 Contracts Bundle</div>
                                        <button class="accordion-toggle">▾</button>
                                    </div>
                                    <div class="accordion-content">
                                        <div
                                            style="background:#fff;padding:12px;border-radius:4px;box-shadow:0 2px 4px rgba(0,0,0,0.06);display:flex;justify-content:space-between;align-items:flex-start;gap:16px;position:relative;">
                                            <div style="flex:1; min-width:260px;">
                                                <div style="font-size:14px;font-weight:700;color:#111827;">2025
                                                    Contracts Overview</div>
                                                <div style="font-size:13px;color:#374151;margin-top:6px;">Summary: 12
                                                    contracts, mixed statuses (Active, Pending, Expired).</div>
                                                <div style="font-size:12px;color:#6B7280;margin-top:8px;">Total FY value
                                                    approx. AUD 420k.</div>
                                            </div>
                                            <div
                                                style="min-width:260px; text-align:right; display:flex; flex-direction:column; justify-content:space-between; align-items:flex-end;">
                                                <div>
                                                    <div style="font-size:13px;color:#111827;"><strong>Status:</strong>
                                                        Mixed</div>
                                                    <div style="font-size:12px;color:#6B7280;margin-top:6px;">Contracts:
                                                        12</div>
                                                    <div style="font-size:12px;color:#6B7280;margin-top:6px;">Total FY
                                                        value: AUD 420,000</div>
                                                </div>
                                                <div style="margin-top:8px;">
                                                    <button class="button-primary"
                                                        onclick="switchView('create-contract')">View</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Shutterstock Images category removed -->

                        <div class="accordion-row">
                            <div class="accordion-header">
                                <div class="accordion-title">Clients</div>
                                <button class="accordion-toggle">▾</button>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-row">
                                    <div class="accordion-header">
                                        <div class="accordion-title">Bateman Projects Ltd</div>
                                        <button class="accordion-toggle">▾</button>
                                    </div>
                                    <div class="accordion-content">
                                        <div
                                            style="background:#fff;padding:12px;border-radius:4px;box-shadow:0 2px 4px rgba(0,0,0,0.06);display:flex;justify-content:space-between;align-items:flex-start;gap:16px;position:relative;">
                                            <div style="flex:1;min-width:220px;">
                                                <div style="font-size:14px;font-weight:700;color:#111827;">Client Master
                                                    Agreement</div>
                                                <div style="font-size:13px;color:#374151;margin-top:6px;">Contract ID:
                                                    CMA-2023-045</div>
                                                <div style="font-size:12px;color:#6B7280;margin-top:8px;">Account
                                                    Manager: Priya Singh</div>
                                            </div>
                                            <div
                                                style="min-width:260px;text-align:right; display:flex; flex-direction:column; justify-content:space-between; align-items:flex-end;">
                                                <div>
                                                    <div style="font-size:13px;color:#111827;"><strong>Status:</strong>
                                                        Active</div>
                                                    <div style="font-size:12px;color:#6B7280;margin-top:6px;">Region:
                                                        APAC</div>
                                                    <div style="font-size:12px;color:#6B7280;margin-top:6px;">Next
                                                        Review: 15-Mar-2026</div>
                                                </div>
                                                <div style="margin-top:8px;">
                                                    <button class="button-primary"
                                                        onclick="switchView('create-contract')">View</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-row">
                                    <div class="accordion-header">
                                        <div class="accordion-title">Covers Foods</div>
                                        <button class="accordion-toggle">▾</button>
                                    </div>
                                    <div class="accordion-content">
                                        <div
                                            style="background:#fff;padding:12px;border-radius:4px;box-shadow:0 2px 4px rgba(0,0,0,0.06);display:flex;justify-content:space-between;align-items:flex-start;gap:16px;position:relative;">
                                            <div style="flex:1;min-width:220px;">
                                                <div style="font-size:14px;font-weight:700;color:#111827;">Covers Foods
                                                    - Distribution Agreement</div>
                                                <div style="font-size:13px;color:#374151;margin-top:6px;">Account:
                                                    Logistics</div>
                                                <div style="font-size:12px;color:#6B7280;margin-top:8px;">Contract ID:
                                                    COV-2026-011</div>
                                            </div>
                                            <div
                                                style="min-width:260px;text-align:right; display:flex; flex-direction:column; justify-content:space-between; align-items:flex-end;">
                                                <div>
                                                    <div style="font-size:13px;color:#111827;"><strong>Status:</strong>
                                                        Pending</div>
                                                </div>
                                                <div style="margin-top:8px;">
                                                    <button class="button-primary"
                                                        onclick="switchView('create-contract')">View</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Workflow View -->
            <div id="workflow-view" class="view flex-1 overflow-auto">
                <div class="p-6">
                    <div class="mb-6"><button class="button-primary" onclick="showNewWorkflow()">New Workflow</button>
                    </div>
                    <div class="workflow-accordion">
                        <div class="accordion-row">
                            <div class="accordion-header">
                                <div class="accordion-title">Inbox (2)</div>
                                <button class="accordion-toggle">▾</button>
                            </div>
                            <div class="accordion-content">
                                <div class="workflow-item">
                                    <div class="workflow-info">
                                        <div class="workflow-title">Employment Contract - Onboarding</div>
                                        <div class="workflow-subtitle">Contract: John Doe - Assigned: HR Team</div>
                                        <div class="workflow-subtitle">Status: Awaiting Signature • Due: 15 Jan 2026
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <button class="button-primary" style="background-color: #3b82f6;"
                                            onclick="switchView('create-workflow')">View</button>
                                        <button class="button-primary">Approve</button>
                                        <button class="button-secondary">Reject</button>
                                    </div>
                                </div>

                                <div class="workflow-item">
                                    <div class="workflow-info">
                                        <div class="workflow-title">Supplier Agreement Review</div>
                                        <div class="workflow-subtitle">Contract: Acme Supplies - Assigned: Procurement
                                        </div>
                                        <div class="workflow-subtitle">Status: Pending Review • Due: 20 Jan 2026</div>
                                    </div>
                                    <div class="flex gap-2">
                                        <button class="button-primary" style="background-color: #3b82f6;"
                                            onclick="switchView('create-workflow')">View</button>
                                        <button class="button-primary">Approve</button>
                                        <button class="button-secondary">Reject</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-row">
                            <div class="accordion-header">
                                <div class="accordion-title">All (4)</div>
                                <button class="accordion-toggle">▾</button>
                            </div>
                            <div class="accordion-content">
                                <div class="workflow-item">
                                    <div class="workflow-info">
                                        <div class="workflow-title">NDA Signing</div>
                                        <div class="workflow-subtitle">Contract: NDA - Acme • Assigned: Legal</div>
                                        <div class="workflow-subtitle">Status: Signed • Completed: 05 Jan 2026</div>
                                    </div>
                                    <button class="button-primary" style="background-color: #3b82f6;"
                                        onclick="switchView('create-workflow')">View</button>
                                </div>

                                <div class="workflow-item">
                                    <div class="workflow-info">
                                        <div class="workflow-title">Service Agreement - SLA Review</div>
                                        <div class="workflow-subtitle">Contract: Service Agreement #102 • Assigned: Ops
                                        </div>
                                        <div class="workflow-subtitle">Status: Review Scheduled • 22 Jan 2026</div>
                                    </div>
                                    <button class="button-primary" style="background-color: #3b82f6;"
                                        onclick="switchView('create-workflow')">View</button>
                                </div>

                                <div class="workflow-item">
                                    <div class="workflow-info">
                                        <div class="workflow-title">Lease Renewal Reminder</div>
                                        <div class="workflow-subtitle">Contract: Lease - Unit 12 • Assigned: Facilities
                                        </div>
                                        <div class="workflow-subtitle">Status: Reminder • 28 Jan 2026</div>
                                    </div>
                                    <button class="button-primary" style="background-color: #3b82f6;"
                                        onclick="switchView('create-workflow')">View</button>
                                </div>

                                <div class="workflow-item">
                                    <div class="workflow-info">
                                        <div class="workflow-title">Beta - Start Date</div>
                                        <div class="workflow-subtitle">Contract: Beta • Assigned: Project Lead</div>
                                        <div class="workflow-subtitle">Status: Scheduled • 08 Jan 2026</div>
                                    </div>
                                    <button class="button-primary" style="background-color: #3b82f6;"
                                        onclick="switchView('create-workflow')">View</button>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-row">
                            <div class="accordion-header">
                                <div class="accordion-title">Approved (1)</div>
                                <button class="accordion-toggle">▾</button>
                            </div>
                            <div class="accordion-content">
                                <div class="workflow-item">
                                    <div class="workflow-info">
                                        <div class="workflow-title">IP License Agreement</div>
                                        <div class="workflow-subtitle">Contract: IP-Lic-88 • Assigned: Legal</div>
                                        <div class="workflow-subtitle">Status: Approved • Approved: 02 Jan 2026</div>
                                    </div>
                                    <button class="button-primary" style="background-color: #3b82f6;"
                                        onclick="switchView('create-workflow')">View</button>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-row">
                            <div class="accordion-header">
                                <div class="accordion-title">Rejected (1)</div>
                                <button class="accordion-toggle">▾</button>
                            </div>
                            <div class="accordion-content">
                                <div class="workflow-item">
                                    <div class="workflow-info">
                                        <div class="workflow-title">Service Level Amendment</div>
                                        <div class="workflow-subtitle">Contract: SLA-011 • Assigned: Product</div>
                                        <div class="workflow-subtitle">Status: Rejected • Reason: Scope mismatch</div>
                                    </div>
                                    <button class="button-primary" style="background-color: #3b82f6;"
                                        onclick="switchView('create-workflow')">View</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Create Contract View -->
            <div id="create-contract-view" class="view flex-1 overflow-auto bg-[#F3F4F6]">
                <div class="p-4">
                    <div class="flex gap-2 mb-6">
                        <button
                            class="bg-[#EF4444] text-white px-6 py-2 rounded-md text-sm font-semibold hover:bg-red-600 transition-colors"
                            onclick="switchView('contracts')">Back</button>
                        <button
                            class="bg-[#22C55E] text-white px-6 py-2 rounded-md text-sm font-semibold hover:bg-green-600 transition-colors">Save
                            Contract</button>
                    </div>

                    <div class="flex flex-col gap-4">
                        <!-- General Section -->
                        <div
                            class="accordion-row open bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                            <div
                                class="accordion-header flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors">
                                <div class="flex items-center gap-3">
                                    <div class="bg-[#7C3AED] w-10 h-10 rounded-full flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z">
                                            </path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        </svg>
                                    </div>
                                    <span class="font-bold text-xl text-gray-800">General:</span>
                                </div>
                                <span class="accordion-toggle text-2xl text-gray-400">▾</span>
                            </div>
                            <div class="accordion-content p-6 bg-[#F3F4F6] border-t border-gray-100">
                                <div class="grid grid-cols-1 gap-6">
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Contract
                                            Title:</label>
                                        <input type="text" placeholder="Enter a Contract Title..."
                                            class="w-full p-4 bg-white border border-gray-200 rounded-md outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all text-gray-700 shadow-sm">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Status:</label>
                                        <select
                                            class="w-full p-4 bg-white border border-gray-200 rounded-md outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all text-gray-500 shadow-sm appearance-none">
                                            <option>Select a Status</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Business
                                            Unit:</label>
                                        <select
                                            class="w-full p-4 bg-white border border-gray-200 rounded-md outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all text-gray-500 shadow-sm appearance-none">
                                            <option>Select a Business Unit</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Category:</label>
                                        <select
                                            class="w-full p-4 bg-white border border-gray-200 rounded-md outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all text-gray-500 shadow-sm appearance-none">
                                            <option>Select a Category</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Type:</label>
                                        <select
                                            class="w-full p-4 bg-white border border-gray-200 rounded-md outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all text-gray-500 shadow-sm appearance-none">
                                            <option>Select a Type</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Supplier:</label>
                                        <select
                                            class="w-full p-4 bg-white border border-gray-200 rounded-md outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all text-gray-500 shadow-sm appearance-none">
                                            <option>Select...</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Link to
                                            Contract:</label>
                                        <select
                                            class="w-full p-4 bg-white border border-gray-200 rounded-md outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all text-gray-500 shadow-sm appearance-none">
                                            <option>Select a Contract to link to...</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Comments:</label>
                                        <textarea placeholder="Enter a Comments..."
                                            class="w-full p-4 bg-white border border-gray-200 rounded-md outline-none h-32 resize-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all text-gray-700 shadow-sm"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Lifecycle Section -->
                        <div class="accordion-row bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                            <div
                                class="accordion-header flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors">
                                <div class="flex items-center gap-3">
                                    <div class="bg-[#3B82F6] w-10 h-10 rounded-full flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                                            </path>
                                        </svg>
                                    </div>
                                    <span class="font-bold text-xl text-gray-800">Lifecycle:</span>
                                </div>
                                <span class="accordion-toggle text-2xl text-gray-400">▾</span>
                            </div>
                            <div class="accordion-content p-6 bg-[#F3F4F6] border-t border-gray-100">
                                <div class="grid grid-cols-1 gap-6">
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Start
                                            Date:</label>
                                        <div class="flex gap-2">
                                            <input type="text" value="13"
                                                class="w-20 p-2 bg-white border border-gray-200 rounded-md text-center text-sm font-medium shadow-sm">
                                            <select
                                                class="flex-1 p-2 bg-white border border-gray-200 rounded-md text-sm font-medium shadow-sm">
                                                <option>January</option>
                                            </select>
                                            <input type="text" value="2026"
                                                class="w-24 p-2 bg-white border border-gray-200 rounded-md text-center text-sm font-medium shadow-sm">
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <label class="text-sm font-semibold text-gray-700">Please remind the contract
                                            owner(s):</label>
                                        <input type="checkbox"
                                            class="w-5 h-5 border-gray-300 rounded text-blue-600 focus:ring-blue-500">
                                    </div>
                                    <button
                                        class="bg-[#D1D5DB] text-gray-700 px-4 py-2 rounded-md font-bold text-sm shadow-sm self-start">Configure
                                        Start Date Reminder</button>

                                    <div class="flex gap-8">
                                        <label class="flex items-center gap-2 cursor-pointer">
                                            <input type="radio" name="term" class="w-4 h-4 text-blue-600" checked>
                                            <span class="text-sm font-semibold text-gray-700">Fixed Term</span>
                                        </label>
                                        <label class="flex items-center gap-2 cursor-pointer">
                                            <input type="radio" name="term" class="w-4 h-4 text-blue-600">
                                            <span class="text-sm font-semibold text-gray-700">Open Ended</span>
                                        </label>
                                    </div>

                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Cycle
                                            (months):</label>
                                        <input type="text" placeholder="Enter a Cycle..."
                                            class="w-full p-4 bg-white border border-gray-200 rounded-md shadow-sm">
                                    </div>

                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">End Date:</label>
                                        <div class="flex gap-2">
                                            <input type="text" value="13"
                                                class="w-20 p-2 bg-white border border-gray-200 rounded-md text-center text-sm font-medium shadow-sm">
                                            <select
                                                class="flex-1 p-2 bg-white border border-gray-200 rounded-md text-sm font-medium shadow-sm">
                                                <option>January</option>
                                            </select>
                                            <input type="text" value="2026"
                                                class="w-24 p-2 bg-white border border-gray-200 rounded-md text-center text-sm font-medium shadow-sm">
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <label class="text-sm font-semibold text-gray-700">Please remind the contract
                                            owner(s):</label>
                                        <input type="checkbox"
                                            class="w-5 h-5 border-gray-300 rounded text-blue-600 focus:ring-blue-500">
                                    </div>
                                    <button
                                        class="bg-[#D1D5DB] text-gray-700 px-4 py-2 rounded-md font-bold text-sm shadow-sm self-start">Configure
                                        End Date Reminder</button>

                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Notice
                                            (months):</label>
                                        <input type="text" placeholder="Enter a Notice Period..."
                                            class="w-full p-4 bg-white border border-gray-200 rounded-md shadow-sm">
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <label class="text-sm font-semibold text-gray-700">Please remind the contract
                                            owner(s):</label>
                                        <input type="checkbox"
                                            class="w-5 h-5 border-gray-300 rounded text-blue-600 focus:ring-blue-500">
                                    </div>
                                    <button
                                        class="bg-[#D1D5DB] text-gray-700 px-4 py-2 rounded-md font-bold text-sm shadow-sm self-start">Configure
                                        Notice Reminder</button>

                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">End of Contract
                                            Action:</label>
                                        <select
                                            class="w-full p-4 bg-white border border-gray-200 rounded-md appearance-none shadow-sm">
                                            <option>Select a End of Contract</option>
                                        </select>
                                    </div>

                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Prolongation
                                            Period (months):</label>
                                        <input type="text" placeholder="Enter a Prolongation Period..."
                                            class="w-full p-4 bg-white border border-gray-200 rounded-md shadow-sm">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Billing Section -->
                        <div class="accordion-row bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                            <div
                                class="accordion-header flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors">
                                <div class="flex items-center gap-3">
                                    <div class="bg-[#F59E0B] w-10 h-10 rounded-full flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z">
                                            </path>
                                        </svg>
                                    </div>
                                    <span class="font-bold text-xl text-gray-800">Billing:</span>
                                </div>
                                <span class="accordion-toggle text-2xl text-gray-400">▾</span>
                            </div>
                            <div class="accordion-content p-6 bg-[#F3F4F6] border-t border-gray-100">
                                <button
                                    class="bg-[#22C55E] text-white px-4 py-2 rounded-md font-bold text-sm shadow-sm mb-6">Add
                                    Billing</button>

                                <div class="bg-[#F9FAFB] border border-gray-200 rounded-md p-6">
                                    <div class="grid grid-cols-1 gap-6">
                                        <div>
                                            <label class="block text-sm font-semibold text-gray-700 mb-2">Billing
                                                Type:</label>
                                            <select
                                                class="w-full p-2 bg-white border border-gray-200 rounded-md appearance-none">
                                                <option>Cost</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-gray-700 mb-2">Billing
                                                Cycle:</label>
                                            <select
                                                class="w-full p-2 bg-white border border-gray-200 rounded-md appearance-none">
                                                <option>Once-off</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-gray-700 mb-2">Billing
                                                Amount:</label>
                                            <div class="flex">
                                                <input type="text" value="0"
                                                    class="flex-1 p-2 bg-white border border-gray-200 rounded-l-md">
                                                <span
                                                    class="bg-[#22C55E] text-white px-4 py-2 rounded-r-md text-xs font-bold flex items-center">ZAR</span>
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-2 gap-4">
                                            <div>
                                                <label class="block text-sm font-semibold text-gray-700 mb-2">First
                                                    Billing Date:</label>
                                                <div class="flex gap-1">
                                                    <input type="text" value="13"
                                                        class="w-10 p-1 bg-white border border-gray-200 rounded text-center text-xs">
                                                    <select
                                                        class="flex-1 p-1 bg-white border border-gray-200 rounded text-xs">
                                                        <option>January</option>
                                                    </select>
                                                    <input type="text" value="2026"
                                                        class="w-14 p-1 bg-white border border-gray-200 rounded text-center text-xs">
                                                </div>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-semibold text-gray-700 mb-2">Last
                                                    Billing Date:</label>
                                                <div class="flex gap-1">
                                                    <input type="text" value="13"
                                                        class="w-10 p-1 bg-white border border-gray-200 rounded text-center text-xs">
                                                    <select
                                                        class="flex-1 p-1 bg-white border border-gray-200 rounded text-xs">
                                                        <option>January</option>
                                                    </select>
                                                    <input type="text" value="2026"
                                                        class="w-14 p-1 bg-white border border-gray-200 rounded text-center text-xs">
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <label
                                                class="block text-sm font-semibold text-gray-700 mb-2">Description:</label>
                                            <textarea
                                                class="w-full p-2 bg-white border border-gray-200 rounded-md h-24 resize-none"></textarea>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-semibold text-gray-700 mb-2">Billing
                                                Increase will take effect from:</label>
                                            <div class="flex gap-1 w-1/2">
                                                <input type="text" value="13"
                                                    class="w-10 p-1 bg-white border border-gray-200 rounded text-center text-xs">
                                                <select
                                                    class="flex-1 p-1 bg-white border border-gray-200 rounded text-xs">
                                                    <option>January</option>
                                                </select>
                                                <input type="text" value="2026"
                                                    class="w-14 p-1 bg-white border border-gray-200 rounded text-center text-xs">
                                            </div>
                                        </div>
                                        <div class="flex justify-end gap-2 mt-4">
                                            <button
                                                class="px-4 py-2 border border-[#EF4444] text-[#EF4444] rounded-md text-sm font-bold hover:bg-red-50">Cancel</button>
                                            <button
                                                class="px-4 py-2 bg-[#22C55E] text-white rounded-md text-sm font-bold hover:bg-green-600">Save</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Contacts Section -->
                        <div class="accordion-row bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                            <div
                                class="accordion-header flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors">
                                <div class="flex items-center gap-3">
                                    <div class="bg-[#A855F7] w-10 h-10 rounded-full flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M3 18v-6a9 9 0 0118 0v6M18 19s-1-4-6-4-6 4-6 4"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M21 19a2 2 0 01-2 2h-1a2 2 0 01-2-2v-3a2 2 0 012-2h3zM3 19a2 2 0 002 2h1a2 2 0 002-2v-3a2 2 0 00-2-2H3z">
                                            </path>
                                        </svg>
                                    </div>
                                    <span class="font-bold text-xl text-gray-800">Contacts:</span>
                                </div>
                                <span class="accordion-toggle text-2xl text-gray-400">▾</span>
                            </div>
                            <div class="accordion-content p-6 bg-[#F3F4F6] border-t border-gray-100">
                                <div class="flex flex-col gap-4">
                                    <!-- Contact Item 1 -->
                                    <div
                                        class="bg-white p-4 rounded-md border border-gray-200 shadow-sm flex items-start gap-4">
                                        <input type="checkbox"
                                            class="mt-1 w-5 h-5 border-gray-300 rounded text-blue-600 focus:ring-blue-500">
                                        <div class="flex flex-col">
                                            <span class="font-bold text-gray-800 text-lg">Sarah Jenkins</span>
                                            <span class="text-gray-600">s.jenkins@outlook.com</span>
                                            <span class="text-gray-600">0119478123</span>
                                        </div>
                                    </div>
                                    <!-- Contact Item 2 -->
                                    <div
                                        class="bg-white p-4 rounded-md border border-gray-200 shadow-sm flex items-start gap-4">
                                        <input type="checkbox"
                                            class="mt-1 w-5 h-5 border-gray-300 rounded text-blue-600 focus:ring-blue-500">
                                        <div class="flex flex-col">
                                            <span class="font-bold text-gray-800 text-lg">Michael Chen</span>
                                            <span class="text-gray-600">m.chen@corporate.com</span>
                                            <span class="text-gray-600">0119478456</span>
                                        </div>
                                    </div>
                                    <!-- Contact Item 3 -->
                                    <div
                                        class="bg-white p-4 rounded-md border border-gray-200 shadow-sm flex items-start gap-4">
                                        <input type="checkbox"
                                            class="mt-1 w-5 h-5 border-gray-300 rounded text-blue-600 focus:ring-blue-500">
                                        <div class="flex flex-col">
                                            <span class="font-bold text-gray-800 text-lg">Emily Rodriguez</span>
                                            <span class="text-gray-600">e.rodriguez@global.co.za</span>
                                            <span class="text-gray-600">0119478789</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Attachments Section -->
                        <div class="accordion-row bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                            <div
                                class="accordion-header flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors">
                                <div class="flex items-center gap-3">
                                    <div class="bg-[#3B82F6] w-10 h-10 rounded-full flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13">
                                            </path>
                                        </svg>
                                    </div>
                                    <span class="font-bold text-xl text-gray-800">Attachment:</span>
                                </div>
                                <span class="accordion-toggle text-2xl text-gray-400">▾</span>
                            </div>
                            <div class="accordion-content p-6 bg-[#F3F4F6] border-t border-gray-100">
                                <button
                                    class="bg-[#22C55E] text-white px-6 py-2 rounded-md text-sm font-bold hover:bg-green-600 transition-colors">Add
                                    Attachment</button>
                            </div>
                        </div>

                        <!-- Workflow Section -->
                        <div class="accordion-row bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                            <div
                                class="accordion-header flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors">
                                <div class="flex items-center gap-3">
                                    <div class="bg-[#F97316] w-10 h-10 rounded-full flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <circle cx="12" cy="7" r="3" stroke-width="2"></circle>
                                            <circle cx="6" cy="17" r="3" stroke-width="2"></circle>
                                            <circle cx="18" cy="17" r="3" stroke-width="2"></circle>
                                            <path d="M12 10v4M12 14H6m6 0h6" stroke-width="2"></path>
                                        </svg>
                                    </div>
                                    <span class="font-bold text-xl text-gray-800">Workflow:</span>
                                </div>
                                <span class="accordion-toggle text-2xl text-gray-400">▾</span>
                            </div>
                            <div class="accordion-content p-6 bg-[#F3F4F6] border-t border-gray-100">
                                <div class="flex items-center gap-3 mb-6">
                                    <span class="text-sm font-semibold text-gray-700">Add Workflow to this
                                        Contract:</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" value="" class="sr-only peer" checked>
                                        <div
                                            class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600">
                                        </div>
                                        <span class="ml-3 text-sm font-medium text-gray-700">On</span>
                                    </label>
                                </div>

                                <div class="grid grid-cols-1 gap-6">
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Workflow
                                            Title:</label>
                                        <input type="text" placeholder="Enter a Workflow Title..."
                                            class="w-full p-4 bg-white border border-gray-200 rounded-md outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 shadow-sm transition-all">
                                    </div>
                                    <div>
                                        <label
                                            class="block text-sm font-semibold text-gray-700 mb-2">Description/Comments:</label>
                                        <textarea placeholder="Enter a Description..."
                                            class="w-full p-4 bg-white border border-gray-200 rounded-md outline-none h-32 resize-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 shadow-sm transition-all"></textarea>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Users:</label>
                                        <div class="relative">
                                            <div
                                                class="w-full p-4 bg-white border border-gray-200 rounded-md shadow-sm flex items-center justify-between cursor-pointer">
                                                <span class="text-gray-400">Select a Contact...</span>
                                                <svg class="w-5 h-5 text-gray-400" fill="currentColor"
                                                    viewBox="0 0 20 20">
                                                    <path fill-rule="evenodd"
                                                        d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                                        clip-rule="evenodd"></path>
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-6">
                                        <span class="text-sm font-semibold text-gray-700">To be approved by:</span>
                                        <label class="flex items-center gap-2 cursor-pointer">
                                            <input type="radio" name="approval" class="w-4 h-4 text-blue-600">
                                            <span class="text-sm font-semibold text-gray-700">Everyone</span>
                                        </label>
                                        <label class="flex items-center gap-2 cursor-pointer">
                                            <input type="radio" name="approval" class="w-4 h-4 text-blue-600">
                                            <span class="text-sm font-semibold text-gray-700">Anyone</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Create Workflow View -->
            <div id="create-workflow-view" class="view flex-1 overflow-auto bg-[#F3F4F6]">
                <div class="p-4">
                    <div class="flex gap-2 mb-6">
                        <button
                            class="bg-[#EF4444] text-white px-6 py-2 rounded-md text-sm font-semibold hover:bg-red-600 transition-colors"
                            onclick="switchView('workflow')">Back</button>
                        <button
                            class="bg-[#22C55E] text-white px-6 py-2 rounded-md text-sm font-semibold hover:bg-green-600 transition-colors">Save
                            Workflow</button>
                    </div>

                    <div class="flex flex-col gap-4">
                        <!-- General Section -->
                        <div
                            class="accordion-row open bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                            <div
                                class="accordion-header flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors">
                                <div class="flex items-center gap-3">
                                    <div class="bg-[#7C3AED] w-10 h-10 rounded-full flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z">
                                            </path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        </svg>
                                    </div>
                                    <span class="font-bold text-xl text-gray-800">General:</span>
                                </div>
                                <span class="accordion-toggle text-2xl text-gray-400">▾</span>
                            </div>
                            <div class="accordion-content p-6 bg-[#F3F4F6] border-t border-gray-100">
                                <div class="grid grid-cols-1 gap-6">
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Workflow
                                            Title:</label>
                                        <input type="text" placeholder="Enter a Workflow Title..."
                                            class="w-full p-4 bg-white border border-gray-200 rounded-md outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 shadow-sm text-gray-700 transition-all">
                                    </div>
                                    <div>
                                        <label
                                            class="block text-sm font-semibold text-gray-700 mb-2">Description/Comments:</label>
                                        <textarea placeholder="Enter a Description/ Comments..."
                                            class="w-full p-4 bg-white border border-gray-200 rounded-md outline-none h-24 resize-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 shadow-sm text-gray-700 transition-all"></textarea>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Link
                                            Contract:</label>
                                        <select
                                            class="w-full p-4 bg-white border border-gray-200 rounded-md outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 shadow-sm text-gray-400 transition-all appearance-none">
                                            <option>Link a Contract...</option>
                                        </select>
                                    </div>
                                    <div class="flex gap-2">
                                        <button
                                            class="bg-[#22C55E] text-white px-4 py-2 rounded-md text-sm font-bold shadow-sm hover:bg-green-600 transition-colors">Add
                                            Lifecycle</button>
                                        <button
                                            class="bg-[#22C55E] text-white px-4 py-2 rounded-md text-sm font-bold shadow-sm hover:bg-green-600 transition-colors">Add
                                            Billing Changes</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Approvals Section -->
                        <div
                            class="accordion-row open bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                            <div
                                class="accordion-header flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors">
                                <div class="flex items-center gap-3">
                                    <div class="bg-[#3B82F6] w-10 h-10 rounded-full flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <circle cx="12" cy="12" r="10" stroke-width="2"></circle>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M9 12l2 2 4-4"></path>
                                        </svg>
                                    </div>
                                    <span class="font-bold text-xl text-gray-800">Approvals:</span>
                                </div>
                                <span class="accordion-toggle text-2xl text-gray-400">▾</span>
                            </div>
                            <div class="accordion-content p-6 bg-[#F3F4F6] border-t border-gray-100">
                                <div class="grid grid-cols-1 gap-6">
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Users:</label>
                                        <div class="relative">
                                            <div
                                                class="w-full p-4 bg-white border border-gray-200 rounded-md shadow-sm flex items-center justify-between cursor-pointer">
                                                <span class="text-gray-400">Select a Contact...</span>
                                                <svg class="w-5 h-5 text-gray-400" fill="currentColor"
                                                    viewBox="0 0 20 20">
                                                    <path fill-rule="evenodd"
                                                        d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                                        clip-rule="evenodd"></path>
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-6">
                                        <span class="text-sm font-semibold text-gray-700">To be approved by:</span>
                                        <label class="flex items-center gap-2 cursor-pointer">
                                            <input type="radio" name="create-workflow-approval"
                                                class="w-4 h-4 text-blue-600" checked>
                                            <span class="text-sm font-semibold text-gray-700">Everyone</span>
                                        </label>
                                        <label class="flex items-center gap-2 cursor-pointer">
                                            <input type="radio" name="create-workflow-approval"
                                                class="w-4 h-4 text-blue-600">
                                            <span class="text-sm font-semibold text-gray-700">Anyone</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Search View -->
            <div id="search-view" class="view flex-1 overflow-auto bg-white">
                <div class="p-6">
                    <div class="relative mb-6">
                        <input type="text" placeholder="Search Contracts..." value="Search Contracts..."
                            class="w-full bg-[#FAFAFA] border-b border-gray-300 p-4 pl-0 text-sm italic text-gray-400 outline-none">
                        <svg class="w-5 h-5 absolute right-0 top-4 text-gray-300" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                    </div>

                    <!-- Contracts Section -->
                    <div class="mb-8">
                        <div class="bg-[#5C6BC0] text-white p-3 rounded-t-lg font-bold text-lg">Contracts</div>
                        <div class="border border-gray-200 border-t-0 rounded-b-lg p-4 flex flex-col gap-3">
                            <!-- Contract Row 1 -->
                            <div
                                class="border border-gray-200 rounded-md p-4 flex justify-between bg-white text-[13px]">
                                <div class="flex flex-col gap-1">
                                    <div>Title: <span class="text-gray-600">Master Services Agreement (MSA)</span></div>
                                    <div>Business Unit: <span class="text-gray-600">Human Resources</span></div>
                                </div>
                                <div class="flex flex-col gap-1 text-right">
                                    <div>Status: <span class="text-gray-600">Active</span></div>
                                    <div>Supplier: <span class="text-gray-600">Shattered Glass Group PTY (Ltd)</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Contract Row 2 -->
                            <div
                                class="border border-gray-200 rounded-md p-4 flex justify-between bg-white text-[13px]">
                                <div class="flex flex-col gap-1">
                                    <div>Title: <span class="text-gray-600">Software License Renewal</span></div>
                                    <div>Business Unit: <span class="text-gray-600">IT Operations</span></div>
                                </div>
                                <div class="flex flex-col gap-1 text-right">
                                    <div>Status: <span class="text-gray-600">Active</span></div>
                                    <div>Client: <span class="text-gray-600">Bateman Projects Ltd</span></div>
                                </div>
                            </div>
                            <!-- Contract Row 3 -->
                            <div
                                class="border border-gray-200 rounded-md p-4 flex justify-between bg-white text-[13px]">
                                <div class="flex flex-col gap-1">
                                    <div>Title: <span class="text-gray-600">Intellectual Property Licensing</span></div>
                                    <div>Business Unit: <span class="text-gray-600">Legal & Compliance</span></div>
                                </div>
                                <div class="flex flex-col gap-1 text-right">
                                    <div>Status: <span class="text-gray-600">Active</span></div>
                                    <div>Supplier: <span class="text-gray-600">Shutterstock Images</span></div>
                                </div>
                            </div>
                            <!-- Contract Row 4 -->
                            <div
                                class="border border-gray-200 rounded-md p-4 flex justify-between bg-white text-[13px]">
                                <div class="flex flex-col gap-1">
                                    <div>Title: <span class="text-gray-600">Distribution & Logistics Contract</span>
                                    </div>
                                    <div>Business Unit: <span class="text-gray-600">Supply Chain</span></div>
                                </div>
                                <div class="flex flex-col gap-1 text-right">
                                    <div>Status: <span class="text-gray-600">Active</span></div>
                                    <div>Client: <span class="text-gray-600">Covers Foods</span></div>
                                </div>
                            </div>
                            <!-- Contract Row 5 -->
                            <div
                                class="border border-gray-200 rounded-md p-4 flex justify-between bg-white text-[13px]">
                                <div class="flex flex-col gap-1">
                                    <div>Title: <span class="text-gray-600">Consulting Services Engagement</span></div>
                                    <div>Business Unit: <span class="text-gray-600">Corporate Strategy</span></div>
                                </div>
                                <div class="flex flex-col gap-1 text-right">
                                    <div>Status: <span class="text-gray-600">Active</span></div>
                                    <div>Client: <span class="text-gray-600">Global Consulting Partners</span></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Events Section -->
                    <div>
                        <div class="bg-[#4FC3F7] text-white p-3 rounded-t-lg font-bold text-lg">Events</div>
                        <div class="border border-gray-200 border-t-0 rounded-b-lg p-4 flex flex-col gap-3">
                            <!-- Event Row 1 -->
                            <div
                                class="border border-gray-200 rounded-md p-4 flex justify-between bg-white text-[13px]">
                                <div class="flex flex-col gap-1">
                                    <div>Title: <span class="text-gray-600">MSA Renewal Kickoff</span></div>
                                    <div>Description: <span class="text-gray-600">Reviewing terms for 2026
                                            extension</span></div>
                                </div>
                                <div class="flex flex-col gap-1 text-right">
                                    <div>Type: <span class="text-gray-600">Start Date</span></div>
                                    <div>Reminder Date: <span class="text-gray-600">12/10/2025 09:00:00 AM</span></div>
                                </div>
                            </div>
                            <!-- Event Row 2 -->
                            <div
                                class="border border-gray-200 rounded-md p-4 flex justify-between bg-white text-[13px]">
                                <div class="flex flex-col gap-1">
                                    <div>Title: <span class="text-gray-600">License Termination Notice</span></div>
                                    <div>Description: <span class="text-gray-600">90-day window for Bateman
                                            software</span></div>
                                </div>
                                <div class="flex flex-col gap-1 text-right">
                                    <div>Type: <span class="text-gray-600">Notice Date</span></div>
                                    <div>Reminder Date: <span class="text-gray-600">12/15/2025 10:30:00 AM</span></div>
                                </div>
                            </div>
                            <!-- Event Row 3 -->
                            <div
                                class="border border-gray-200 rounded-md p-4 flex justify-between bg-white text-[13px]">
                                <div class="flex flex-col gap-1">
                                    <div>Title: <span class="text-gray-600">Facility Lease Expiry</span></div>
                                    <div>Description: <span class="text-gray-600">Final walk-through and key
                                            handover</span></div>
                                </div>
                                <div class="flex flex-col gap-1 text-right">
                                    <div>Type: <span class="text-gray-600">End Date</span></div>
                                    <div>Reminder Date: <span class="text-gray-600">12/28/2025 12:00:00 PM</span></div>
                                </div>
                            </div>
                            <!-- Event Row 4 -->
                            <div
                                class="border border-gray-200 rounded-md p-4 flex justify-between bg-white text-[13px]">
                                <div class="flex flex-col gap-1">
                                    <div>Title: <span class="text-gray-600">Quarterly Performance Review</span></div>
                                    <div>Description: <span class="text-gray-600">KPI evaluation for Covers Foods</span>
                                    </div>
                                </div>
                                <div class="flex flex-col gap-1 text-right">
                                    <div>Type: <span class="text-gray-600">Performance Review</span></div>
                                    <div>Reminder Date: <span class="text-gray-600">01/08/2026 02:00:00 PM</span></div>
                                </div>
                            </div>
                            <!-- Event Row 5 -->
                            <div
                                class="border border-gray-200 rounded-md p-4 flex justify-between bg-white text-[13px]">
                                <div class="flex flex-col gap-1">
                                    <div>Title: <span class="text-gray-600">Security Audit Deadline</span></div>
                                    <div>Description: <span class="text-gray-600">Compliance check for
                                            SecuredEnterprise</span></div>
                                </div>
                                <div class="flex flex-col gap-1 text-right">
                                    <div>Type: <span class="text-gray-600">Audit</span></div>
                                    <div>Reminder Date: <span class="text-gray-600">01/15/2026 11:00:00 AM</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Events List View -->
            <div id="new-event-view" class="view flex-1 overflow-auto">
                <div class="p-6">
                    <div class="mb-4">
                        <button class="button-primary" style="background:#10b981;padding:8px 14px;"
                            onclick="switchView('create-event')">New Event</button>
                    </div>

                    <div id="eventsListSection" class="mb-6">
                        <!-- Event cards rendered by JS -->
                    </div>

                    <div class="events-accordion">
                        <div class="accordion-row">
                            <div class="accordion-header">
                                <div class="accordion-title">Shattered Glass Group PTY (Ltd)</div>
                                <button class="accordion-toggle">▾</button>
                            </div>
                            <div class="accordion-content"></div>
                        </div>

                        <div class="accordion-row">
                            <div class="accordion-header">
                                <div class="accordion-title">Bateman Projects Ltd</div>
                                <button class="accordion-toggle">▾</button>
                            </div>
                            <div class="accordion-content"></div>
                        </div>

                        <div class="accordion-row">
                            <div class="accordion-header">
                                <div class="accordion-title">Service Agreement #102</div>
                                <button class="accordion-toggle">▾</button>
                            </div>
                            <div class="accordion-content"></div>
                        </div>

                        <div class="accordion-row">
                            <div class="accordion-header">
                                <div class="accordion-title">Lease - Unit 12</div>
                                <button class="accordion-toggle">▾</button>
                            </div>
                            <div class="accordion-content"></div>
                        </div>

                        <div class="accordion-row">
                            <div class="accordion-header">
                                <div class="accordion-title">NDA - Acme</div>
                                <button class="accordion-toggle">▾</button>
                            </div>
                            <div class="accordion-content"></div>
                        </div>

                        <div class="accordion-row">
                            <div class="accordion-header">
                                <div class="accordion-title">Other</div>
                                <button class="accordion-toggle">▾</button>
                            </div>
                            <div class="accordion-content"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Create Event View -->
            <div id="create-event-view" class="view flex-1 overflow-auto bg-[#F3F4F6]">
                <div class="p-4">
                    <div class="flex gap-2 mb-6">
                        <button
                            class="bg-[#EF4444] text-white px-6 py-2 rounded-md text-sm font-semibold hover:bg-red-600 transition-colors"
                            onclick="switchView('events')">Back</button>
                        <button
                            class="bg-[#22C55E] text-white px-6 py-2 rounded-md text-sm font-semibold hover:bg-green-600 transition-colors">Save
                            Event</button>
                    </div>

                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                        <!-- Accordion Header -->
                        <div class="flex items-center justify-between p-4 border-b border-gray-100 bg-white">
                            <div class="flex items-center gap-3">
                                <div class="bg-[#7C3AED] w-10 h-10 rounded-full flex items-center justify-center">
                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z">
                                        </path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    </svg>
                                </div>
                                <span class="font-bold text-xl text-gray-800">General:</span>
                            </div>
                            <svg class="w-6 h-6 text-gray-800" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </div>

                        <!-- Content Area -->
                        <div class="p-6 bg-[#F3F4F6]">
                            <div class="max-w-full">
                                <div class="mb-6">
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Event Title:</label>
                                    <input type="text" placeholder="Enter a Event Title..."
                                        class="w-full p-4 bg-white border border-gray-200 rounded-md outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all text-gray-700 shadow-sm">
                                </div>

                                <div class="mb-6">
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Type:</label>
                                    <input type="text" value="Custom" readonly
                                        class="w-full p-4 bg-[#D1D5DB] border border-gray-300 rounded-md text-gray-600 cursor-not-allowed font-medium">
                                </div>

                                <div class="mb-6">
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Link Contract:</label>
                                    <div class="relative">
                                        <select
                                            class="w-full p-4 bg-white border border-gray-200 rounded-md outline-none appearance-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all text-gray-500 shadow-sm">
                                            <option>Link a Contract...</option>
                                        </select>
                                        <div
                                            class="absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none">
                                            <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd"
                                                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                                    clip-rule="evenodd"></path>
                                            </svg>
                                        </div>
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 mb-6">
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Event
                                            Date:</label>
                                        <div class="flex gap-2">
                                            <input type="text" value="13"
                                                class="w-20 p-2 bg-white border border-gray-200 rounded-md text-center text-sm font-medium shadow-sm">
                                            <select
                                                class="flex-1 p-2 bg-white border border-gray-200 rounded-md text-sm font-medium shadow-sm">
                                                <option>January</option>
                                            </select>
                                            <input type="text" value="2025"
                                                class="w-24 p-2 bg-white border border-gray-200 rounded-md text-center text-sm font-medium shadow-sm">
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Reminder
                                            Date:</label>
                                        <div class="flex gap-2">
                                            <input type="text" value="13"
                                                class="w-20 p-2 bg-white border border-gray-200 rounded-md text-center text-sm font-medium shadow-sm">
                                            <select
                                                class="flex-1 p-2 bg-white border border-gray-200 rounded-md text-sm font-medium shadow-sm">
                                                <option>January</option>
                                            </select>
                                            <input type="text" value="2025"
                                                class="w-24 p-2 bg-white border border-gray-200 rounded-md text-center text-sm font-medium shadow-sm">
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-6">
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Description:</label>
                                    <textarea placeholder="Enter a Description..."
                                        class="w-full p-4 bg-white border border-gray-200 rounded-md outline-none h-32 resize-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all text-gray-700 shadow-sm"></textarea>
                                </div>

                                <div class="mb-6">
                                    <div class="flex items-center gap-4 mb-4">
                                        <label class="text-sm font-semibold text-gray-700">Recipient List:</label>
                                        <button
                                            class="bg-[#22C55E] text-white px-6 py-2 rounded-md text-sm font-bold hover:bg-green-600 transition-colors">Add
                                            Contact</button>
                                    </div>
                                    <div class="w-full h-80 bg-white border border-gray-200 rounded-md shadow-inner">
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Reminder
                                        frequency:</label>
                                    <div class="relative max-w-xs">
                                        <select
                                            class="w-full p-3 bg-white border border-gray-200 rounded-md outline-none appearance-none text-sm text-gray-500 shadow-sm">
                                            <option>- Select Frequency -</option>
                                        </select>
                                        <div
                                            class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                            <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd"
                                                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                                    clip-rule="evenodd"></path>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function switchView(viewName) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
            const items = document.querySelectorAll('.sidebar-item');
            if (viewName === 'dashboards') {
                document.getElementById('dashboards-view').classList.add('active');
                items[0].classList.add('active');
                document.querySelector('.header-title').textContent = 'Dashboard';
            } else if (viewName === 'workflow') {
                document.getElementById('workflow-view').classList.add('active');
                items[1].classList.add('active');
                document.querySelector('.header-title').textContent = 'Workflow';
            } else if (viewName === 'contracts') {
                document.getElementById('contracts-view').classList.add('active');
                items[2].classList.add('active');
                document.querySelector('.header-title').textContent = 'Contracts';
            } else if (viewName === 'events') {
                document.getElementById('new-event-view').classList.add('active');
                items[3].classList.add('active');
                document.querySelector('.header-title').textContent = 'Events';
            } else if (viewName === 'create-event') {
                document.getElementById('create-event-view').classList.add('active');
                items[3].classList.add('active');
                document.querySelector('.header-title').textContent = 'Events';
            } else if (viewName === 'create-contract') {
                document.getElementById('create-contract-view').classList.add('active');
                items[2].classList.add('active');
                document.querySelector('.header-title').textContent = 'Contracts';
            } else if (viewName === 'create-workflow') {
                document.getElementById('create-workflow-view').classList.add('active');
                items[1].classList.add('active');
                document.querySelector('.header-title').textContent = 'Workflow';
            } else if (viewName === 'search') {
                document.getElementById('search-view').classList.add('active');
                document.querySelector('.header-title').textContent = 'Contracts';
            }
        }
        function showNewWorkflow() { switchView('create-workflow'); }
        // Initialize default view
        switchView('dashboards');

        // Chart setup for Contracts per Category
        (function initCategoryChart() {
            const ctx = document.getElementById('categoryChart');
            if (!ctx) return;
            const data = {
                labels: [
                    'Sales and Purchase Agreements',
                    'Employment and HR Agreements',
                    'Non-Disclosure Agreements (NDA)',
                    'Intellectual Property Licenses',
                    'Lease and Real Estate Agreements',
                    'Partnership and Joint Venture Agreements',
                    'Service-Level Agreements (SLA)',
                    'Indemnity Agreements',
                    'Franchise Agreements',
                    'Settlement and Release Agreements'
                ],
                datasets: [{
                    data: [20, 15, 15, 10, 8, 7, 10, 5, 5, 5],
                    backgroundColor: ['#ef4444', '#3b82f6', '#f59e0b', '#10b981', '#7c3aed', '#06b6d4', '#f97316', '#ef6aa6', '#60a5fa', '#84cc16'],
                    hoverBackgroundColor: ['#dc2626', '#2563eb', '#d97706', '#059669', '#6d28d9', '#0891b2', '#ea580c', '#db4d95', '#3b82f6', '#65a30d'],
                    borderWidth: 0
                }]
            };
            const chart = new Chart(ctx, {
                type: 'doughnut',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '60%',
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: true }
                    }
                }
            });

            // Build a vertical HTML legend that fills the right block
            const legendContainer = document.getElementById('chartLegend');
            if (legendContainer) {
                legendContainer.innerHTML = '';
                const labels = chart.data.labels || [];
                const bg = chart.data.datasets && chart.data.datasets[0] && chart.data.datasets[0].backgroundColor || [];
                const values = chart.data.datasets && chart.data.datasets[0] && chart.data.datasets[0].data || [];
                const total = values.reduce((s, v) => s + Number(v || 0), 0) || 1;
                labels.forEach((label, i) => {
                    const value = Number(values[i] || 0);
                    const pct = Math.round((value / total) * 1000) / 10; // one decimal

                    const item = document.createElement('div');
                    item.className = 'chart-legend-item';

                    const left = document.createElement('div');
                    left.style.display = 'flex';
                    left.style.alignItems = 'center';

                    const colorBox = document.createElement('span');
                    colorBox.className = 'chart-legend-color';
                    colorBox.style.background = bg[i] || '#ccc';

                    const labelDiv = document.createElement('div');
                    labelDiv.className = 'chart-legend-label';
                    labelDiv.textContent = label;

                    left.appendChild(colorBox);
                    left.appendChild(labelDiv);

                    const pctDiv = document.createElement('div');
                    pctDiv.className = 'chart-legend-value';
                    pctDiv.textContent = pct + '%';

                    item.appendChild(left);
                    item.appendChild(pctDiv);
                    legendContainer.appendChild(item);
                });
            }
        })();

        // Accordion toggle for workflow sections (delegated + keyboard support)
        (function wireWorkflowAccordion() {
            document.addEventListener('click', function (e) {
                const header = e.target.closest('.accordion-header');
                if (!header) return;
                const row = header.parentElement;
                if (!row) return;
                row.classList.toggle('open');
            });

            // Keyboard support: Enter or Space to toggle when header is focused
            document.addEventListener('keydown', function (e) {
                if (e.key !== 'Enter' && e.key !== ' ') return;
                const active = document.activeElement;
                if (!active) return;
                const header = active.closest && active.closest('.accordion-header');
                if (!header) return;
                e.preventDefault();
                const row = header.parentElement;
                if (!row) return;
                row.classList.toggle('open');
            });
        })();

        // Render structured placeholder events on the calendar and populate the event list
        (function renderPlaceholderEvents() {
            const events = [
                { day: 8, title: 'Beta - Start Date', contract: 'Contract: Beta', type: 'Start Date', color: '#0ea5a4', time: '09:00' },
                { day: 13, title: 'Notice Event', contract: 'Contract: Legend', type: 'Notice', color: '#ef4444', time: 'All day' },
                { day: 22, title: 'SLA Review', contract: 'Service Agreement #102', type: 'Review', color: '#f97316', time: '14:00' },
                { day: 28, title: 'Lease Renewal Reminder', contract: 'Lease - Unit 12', type: 'Reminder', color: '#7c3aed', time: 'All day' },
                { day: 5, title: 'NDA Signing', contract: 'NDA - Acme', type: 'Signing', color: '#3b82f6', time: '11:30' }
            ];

            // helper: find calendar cell by day
            function getDayCell(d) {
                return document.querySelector('.calendar-day[data-day="' + d + '"]');
            }

            // make events accessible globally and place markers/tooltips on days
            window.calendarEvents = events;
            events.forEach(ev => {
                const cell = getDayCell(ev.day);
                if (!cell) return;
                cell.style.position = 'relative';

                // color dot
                const dot = document.createElement('span');
                dot.style.width = '10px'; dot.style.height = '10px'; dot.style.borderRadius = '50%'; dot.style.background = ev.color;
                dot.style.position = 'absolute'; dot.style.right = '6px'; dot.style.top = '6px';
                dot.title = ev.title + ' - ' + ev.time;
                cell.appendChild(dot);

                // small badge if multiple events (simple count)
                const existing = cell.querySelectorAll('.event-dot').length;
                dot.className = 'event-dot';
                if (existing > 0) {
                    // show a tiny count badge instead
                    const badge = document.createElement('div');
                    badge.textContent = existing + 1;
                    badge.style.position = 'absolute'; badge.style.left = '6px'; badge.style.top = '6px'; badge.style.background = '#111827'; badge.style.color = '#fff'; badge.style.width = '18px'; badge.style.height = '18px'; badge.style.borderRadius = '4px'; badge.style.display = 'flex'; badge.style.alignItems = 'center'; badge.style.justifyContent = 'center'; badge.style.fontSize = '11px';
                    cell.appendChild(badge);
                }
            });

            // create or find event list container under the calendar
            const parentSection = document.getElementById('calendarSectionContent');
            let listWrap = parentSection.querySelector('#eventsListContainer');
            if (!listWrap) {
                listWrap = document.createElement('div');
                listWrap.id = 'eventsListContainer';
                listWrap.className = 'mt-6';
                parentSection.appendChild(listWrap);
            }

            function renderEventsList(day) {
                listWrap.innerHTML = '';
                const dayEvents = (window.calendarEvents || []).filter(e => e.day === day);
                if (!dayEvents.length) {
                    const note = document.createElement('div');
                    note.style.color = '#6B7280';
                    note.textContent = 'No events for this date.';
                    listWrap.appendChild(note);
                    return;
                }
                dayEvents.forEach(ev => {
                    const item = document.createElement('div');
                    item.className = 'event-item';
                    item.style.cursor = 'default';

                    const date = document.createElement('div');
                    date.className = 'event-date';
                    date.textContent = ev.day + ' Jan 2026';

                    const title = document.createElement('div');
                    title.className = 'event-title';
                    title.style.color = ev.color;
                    title.style.fontWeight = '700';
                    title.textContent = ev.title + ' (' + ev.type + ')';

                    const details = document.createElement('div');
                    details.style.marginTop = '6px';
                    details.textContent = ev.contract + ' • ' + ev.time;

                    item.appendChild(date);
                    item.appendChild(title);
                    item.appendChild(details);
                    listWrap.appendChild(item);
                });
            }

            // selection helper
            function selectDay(day) {
                document.querySelectorAll('.calendar-day.selected-day').forEach(e => e.classList.remove('selected-day'));
                const cell = document.querySelector('.calendar-day[data-day="' + day + '"]');
                if (cell) cell.classList.add('selected-day');
                renderEventsList(day);
            }

            // wire calendar cell clicks to selection (not modal)
            document.querySelectorAll('.calendar-day').forEach(cell => {
                cell.addEventListener('click', () => {
                    const day = Number(cell.getAttribute('data-day'));
                    selectDay(day);
                });
            });

            // default select today's date if in this month/year, else select first event day
            const today = new Date();
            const shownMonth = (document.getElementById('calendarMonth') || {}).textContent || '';
            const shownYear = Number((document.getElementById('calendarYear') || {}).textContent) || today.getFullYear();
            const monthIndex = new Date(shownMonth + ' 1, ' + shownYear).getMonth();
            const todayInShownMonth = (today.getFullYear() === shownYear && today.getMonth() === monthIndex);
            if (todayInShownMonth && document.querySelector('.calendar-day[data-day="' + today.getDate() + '"]')) {
                selectDay(today.getDate());
            } else if (window.calendarEvents && window.calendarEvents.length) {
                selectDay(window.calendarEvents[0].day);
            }

            // No static/full event list appended here — filtered list is rendered via renderEventsList(day)
        })();

        // Render events list on the Events page and group them into accordion rows when possible
        function renderEventsPage() {
            const container = document.getElementById('eventsListSection');
            if (!container) return;
            container.innerHTML = '';
            const events = (window.calendarEvents || []).slice();
            if (!events.length) {
                const note = document.createElement('div');
                note.style.color = '#6B7280';
                note.textContent = 'No events available.';
                container.appendChild(note);
                return;
            }

            // gather accordion rows and clear their contents
            const accordionRows = Array.from(document.querySelectorAll('#new-event-view .events-accordion .accordion-row'));
            accordionRows.forEach(r => {
                const c = r.querySelector('.accordion-content');
                if (c) c.innerHTML = '';
            });

            // Sample group data to display under each grouping by default
            const sampleGroupData = {
                'shattered glass group pty (ltd)': [
                    { title: 'MSA Review Meeting', contract: 'Master Services Agreement (MSA)', type: 'Review', time: '10:00', color: '#06b6d4' },
                    { title: 'MSA Renewal Planning', contract: 'Master Services Agreement (MSA)', type: 'Planning', time: '14:00', color: '#0ea5a4' }
                ],
                'bateman projects ltd': [
                    { title: 'Client Onboarding', contract: 'Client Master Agreement', type: 'Onboarding', time: '11:00', color: '#3b82f6' }
                ],
                'service agreement #102': [
                    { title: 'SLA Review', contract: 'Service Agreement #102', type: 'Review', time: '14:00', color: '#f97316' },
                    { title: 'SLA Follow-up', contract: 'Service Agreement #102', type: 'Follow-up', time: '10:30', color: '#fb923c' }
                ],
                'lease - unit 12': [
                    { title: 'Lease Renewal Reminder', contract: 'Lease - Unit 12', type: 'Reminder', time: 'All day', color: '#7c3aed' }
                ],
                'nda - acme': [
                    { title: 'NDA Signing', contract: 'NDA - Acme', type: 'Signing', time: '11:30', color: '#3b82f6' }
                ],
                'other': [
                    { title: 'General Review', contract: 'Contract: Misc', type: 'Review', time: '13:00', color: '#9CA3AF' }
                ]
            };

            // Pre-populate each accordion row with sample items (so each grouping has different data underneath)
            accordionRows.forEach(r => {
                const titleEl = r.querySelector('.accordion-title');
                const contentEl = r.querySelector('.accordion-content');
                if (!titleEl || !contentEl) return;
                const key = titleEl.textContent.trim().toLowerCase();
                const samples = sampleGroupData[key] || [];
                samples.forEach(s => contentEl.appendChild(createCard(s)));
            });

            // helper to create an event card element
            function createCard(ev) {
                const card = document.createElement('div');
                card.style.background = '#fff';
                card.style.borderRadius = '4px';
                card.style.boxShadow = '0 2px 4px rgba(0,0,0,0.06)';
                card.style.padding = '12px';
                card.style.marginBottom = '12px';
                card.style.display = 'flex';
                card.style.justifyContent = 'space-between';
                card.style.alignItems = 'flex-start';

                const left = document.createElement('div');
                left.style.flex = '1';
                left.style.minWidth = '220px';

                const title = document.createElement('div');
                title.style.fontSize = '14px';
                title.style.fontWeight = '700';
                title.style.color = '#111827';
                title.textContent = ev.title || 'Untitled';

                const desc = document.createElement('div');
                desc.style.fontSize = '13px';
                desc.style.color = '#374151';
                desc.style.marginTop = '6px';
                desc.textContent = ev.contract || '';

                left.appendChild(title);
                left.appendChild(desc);

                const right = document.createElement('div');
                right.style.minWidth = '260px';
                right.style.textAlign = 'right';
                right.style.display = 'flex';
                right.style.flexDirection = 'column';
                right.style.justifyContent = 'space-between';
                right.style.alignItems = 'flex-end';

                const type = document.createElement('div');
                type.style.fontSize = '13px';
                type.style.color = '#111827';
                type.innerHTML = '<strong>Type:</strong> ' + (ev.type || 'Event');

                const rem = document.createElement('div');
                rem.style.fontSize = '12px';
                rem.style.color = '#6B7280';
                rem.style.marginTop = '6px';
                rem.textContent = 'Reminder Date: ' + (ev.time === 'All day' ? '12/10/2025 12:00:00 AM' : ev.time);

                const btnWrap = document.createElement('div');
                btnWrap.style.marginTop = '8px';
                const btn = document.createElement('button');
                btn.className = 'button-primary';
                btn.textContent = 'View';
                btn.onclick = () => switchView('create-event');
                btnWrap.appendChild(btn);

                right.appendChild(type);
                right.appendChild(rem);
                right.appendChild(btnWrap);

                card.appendChild(left);
                card.appendChild(right);
                return card;
            }

            // Place events into matching accordion rows if possible (match on contract text or title).
            // If none match, place into an 'Other' accordion row (created if needed).
            events.forEach(ev => {
                const evContractLower = (ev.contract || '').toLowerCase();
                const evTitleLower = (ev.title || '').toLowerCase();
                let placed = false;
                for (const row of accordionRows) {
                    const titleEl = row.querySelector('.accordion-title');
                    const contentEl = row.querySelector('.accordion-content');
                    if (!titleEl || !contentEl) continue;
                    const title = titleEl.textContent.trim().toLowerCase();
                    if (!title) continue;
                    // match by contract OR title containing the group title
                    if (evContractLower.includes(title) || evTitleLower.includes(title)) {
                        contentEl.appendChild(createCard(ev));
                        placed = true;
                        break;
                    }
                }

                if (!placed) {
                    // find or create an 'Other' accordion row
                    let otherRow = accordionRows.find(r => {
                        const t = r.querySelector('.accordion-title');
                        return t && t.textContent.trim().toLowerCase() === 'other';
                    });
                    if (!otherRow) {
                        const eventsAccordion = document.querySelector('#new-event-view .events-accordion');
                        if (eventsAccordion) {
                            otherRow = document.createElement('div');
                            otherRow.className = 'accordion-row';
                            otherRow.innerHTML = '<div class="accordion-header"><div class="accordion-title">Other</div><button class="accordion-toggle">▾</button></div><div class="accordion-content"></div>';
                            eventsAccordion.appendChild(otherRow);
                            // update accordionRows so subsequent unmatched events go into this
                            accordionRows.push(otherRow);
                        }
                    }
                    if (otherRow) {
                        const contentEl = otherRow.querySelector('.accordion-content');
                        if (contentEl) contentEl.appendChild(createCard(ev));
                    }
                }
            });

            // Auto-open any accordion row that now contains events and hide empty rows for clarity
            accordionRows.forEach(r => {
                const contentEl = r.querySelector('.accordion-content');
                if (!contentEl) return;
                if (contentEl.children.length > 0) {
                    r.classList.add('open');
                    r.style.display = '';
                } else {
                    r.classList.remove('open');
                    r.style.display = 'none';
                }
            });
        }

        // Ensure Events page renders when switching to Events
        const originalSwitch = switchView;
        window.switchView = function (viewName) {
            originalSwitch(viewName);
            if (viewName === 'events') renderEventsPage();
        }

        // Initial render for events if view active
        if (document.getElementById('new-event-view') && document.getElementById('new-event-view').classList.contains('active')) {
            renderEventsPage();
        }

        // Modal removed: event details will be shown inline under the calendar instead.
    </script>

</body>

</html>